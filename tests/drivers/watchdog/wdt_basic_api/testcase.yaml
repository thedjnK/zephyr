common:
  depends_on: watchdog
  tags:
    - drivers
    - watchdog
tests:
  drivers.watchdog:
    filter: >
      not (CONFIG_WDT_SAM or dt_compat_enabled("st,stm32-window-watchdog")
       or dt_compat_enabled("st,stm32-watchdog") or CONFIG_SOC_FAMILY_LPC or
       CONFIG_SOC_SERIES_IMXRT6XX or CONFIG_SOC_SERIES_IMXRT5XX or
       CONFIG_SOC_FAMILY_GD_GD32 or SOC_SERIES_GD32VF103)
    platform_exclude:
      - mec15xxevb_assy6853/mec1501_hsz
      - s32z2xxdc2/s32z270/rtu0
      - s32z2xxdc2/s32z270/rtu1
      - s32z2xxdc2@D/s32z270/rtu0
      - s32z2xxdc2@D/s32z270/rtu1
  drivers.watchdog.stm32wwdg:
    filter: dt_compat_enabled("st,stm32-window-watchdog") or dt_compat_enabled("st,stm32-watchdog")
    extra_args: DTC_OVERLAY_FILE="boards/stm32_wwdg.overlay"
    platform_allow:
      - nucleo_f091rc/stm32f091xc
      - nucleo_f103rb/stm32f103xb
      - nucleo_f207zg/stm32f207xx
      - stm32f3_disco/stm32f303xc
      - nucleo_f429zi/stm32f429xx
      - nucleo_f746zg/stm32f746xx
      - nucleo_g071rb/stm32g071xx
      - nucleo_g474re/stm32g474xx
      - nucleo_l073rz/stm32l073xx
      - nucleo_l152re/stm32l152xe
      - nucleo_l4r5zi/stm32l4r5xx
      - stm32l562e_dk/stm32l562xx
      - nucleo_wb55rg/stm32wb55xx
      - nucleo_wl55jc/stm32wl55xx
      - b_u585i_iot02a/stm32u585xx
      - nucleo_u575zi_q/stm32u575xx
      - nucleo_c031c6/stm32c031xx
      - stm32h573i_dk/stm32h573xx
      - nucleo_wba52cg/stm32wba52xx
    integration_platforms:
      - nucleo_f091rc/stm32f091xc
  drivers.watchdog.stm32wwdg_h7:
    filter: dt_compat_enabled("st,stm32-window-watchdog") or dt_compat_enabled("st,stm32-watchdog")
    extra_args: DTC_OVERLAY_FILE="boards/stm32_wwdg_h7.overlay"
    platform_allow:
      - nucleo_h753zi/stm32h753xx
      - nucleo_h743zi/stm32h743xx
  drivers.watchdog.stm32iwdg:
    filter: dt_compat_enabled("st,stm32-window-watchdog") or dt_compat_enabled("st,stm32-watchdog")
    extra_args: DTC_OVERLAY_FILE="boards/stm32_iwdg.overlay"
    platform_allow:
      - nucleo_f091rc/stm32f091xc
      - nucleo_f103rb/stm32f103xb
      - nucleo_f207zg/stm32f207xx
      - stm32f3_disco/stm32f303xc
      - nucleo_f429zi/stm32f429xx
      - nucleo_f746zg/stm32f746xx
      - nucleo_g071rb/stm32g071xx
      - nucleo_g474re/stm32g474xx
      - nucleo_l073rz/stm32l073xx
      - nucleo_l152re/stm32l152xe
      - nucleo_l4r5zi/stm32l4r5xx
      - stm32l562e_dk/stm32l562xx
      - nucleo_wb55rg/stm32wb55xx
      - nucleo_wl55jc/stm32wl55xx
      - b_u585i_iot02a/stm32u585xx
      - nucleo_u575zi_q/stm32u575xx
      - nucleo_h753zi/stm32h753xx
      - nucleo_h743zi/stm32h743xx
      - nucleo_c031c6/stm32c031xx
      - nucleo_h753zi/stm32h753xx
      - nucleo_wba52cg/stm32wba52xx
    integration_platforms:
      - nucleo_f091rc/stm32f091xc
  drivers.watchdog.mec15xxevb_assy6853:
    build_only: true
    platform_allow: mec15xxevb_assy6853/mec1501_hsz
  drivers.watchdog.counter_watchdog:
    platform_allow: nrf52840dk/nrf52840
    extra_args:
      - OVERLAY_CONFIG="boards/nrf52840dk_nrf52840_counter.conf"
      - DTC_OVERLAY_FILE="boards/nrf52840dk_nrf52840_counter.overlay"
  drivers.watchdog.gd32fwdgt:
    filter: dt_compat_enabled("gd,gd32-fwdgt")
    extra_args: DTC_OVERLAY_FILE="boards/gd32_fwdgt.overlay"
    platform_allow:
      - gd32e103v_eval/gd32e103
      - gd32e507v_start/gd32e507
      - gd32f350r_eval/gd32f350
      - gd32f403z_eval/gd32f403
      - gd32f450i_eval/gd32f450
      - gd32f450z_eval/gd32f450
      - gd32f470i_eval/gd32f470
      - gd32vf103c_starter/gd32vf103
      - gd32vf103v_eval/gd32vf103
      - longan_nano/gd32vf103
    integration_platforms:
      - gd32e103v_eval/gd32e103
  drivers.watchdog.gd32wwdgt:
    filter: dt_compat_enabled("gd,gd32-wwdgt")
    extra_args: DTC_OVERLAY_FILE="boards/gd32_wwdgt.overlay"
    platform_allow:
      - gd32e103v_eval/gd32e103
      - gd32e507v_start/gd32e507
      - gd32f350r_eval/gd32f350
      - gd32f403z_eval/gd32f403
      - gd32f450i_eval/gd32f450
      - gd32f450z_eval/gd32f450
      - gd32f470i_eval/gd32f470
      - gd32vf103c_starter/gd32vf103
      - gd32vf103v_eval/gd32vf103
      - longan_nano/gd32vf103
    integration_platforms:
      - gd32e103v_eval/gd32e103
  drivers.watchdog.nxp_s32:
    build_only: true
    platform_allow:
      - s32z2xxdc2/s32z270/rtu0
      - s32z2xxdc2/s32z270/rtu1
      - s32z2xxdc2@D/s32z270/rtu0
      - s32z2xxdc2@D/s32z270/rtu1
      - mr_canhubk3/s32k344
  drivers.watchdog.mimxrt1050_evk_ti_tps382x:
    filter: dt_compat_enabled("ti,tps382x")
    platform_allow: mimxrt1050_evk/mimxrt1052
    extra_args: DTC_OVERLAY_FILE="boards/mimxrt1050_evk_ti_tps382x.overlay"
