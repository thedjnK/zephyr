common:
  tags:
    - fpu
    - kernel
    - userspace
tests:
  kernel.fpu_sharing.float_disable:
    arch_allow:
      - arm
      - sparc
    filter: CONFIG_ARMV7_M_ARMV8_M_FP or CONFIG_ARMV7_R_FP or CONFIG_CPU_HAS_FPU
    extra_configs:
      - arch:arm:CONFIG_DYNAMIC_INTERRUPTS=y
  kernel.fpu_sharing.float_disable.x86.fpu:
    extra_args: CONF_FILE=prj_x86.conf
    extra_configs:
      - CONFIG_X86_SSE_FP_MATH=n
      - CONFIG_X86_SSE=n
    platform_allow:
      - qemu_x86/atom
      - qemu_x86_lakemont/lakemont
      - intel_ehl_crb/elkhart_lake
      - acrn_ehl_crb/elkhart_lake
    integration_platforms:
      - qemu_x86/atom
  kernel.fpu_sharing.float_disable.x86.fpu.sse:
    extra_args: CONF_FILE=prj_x86.conf
    extra_configs:
      - CONFIG_X86_SSE_FP_MATH=n
    platform_allow:
      - qemu_x86/atom
      - qemu_x86_lakemont/lakemont
      - intel_ehl_crb/elkhart_lake
      - acrn_ehl_crb/elkhart_lake
    integration_platforms:
      - qemu_x86/atom
    toolchain_exclude:
      - llvm
      - oneApi
  kernel.fpu_sharing.float_disable.x86.sse:
    extra_args: CONF_FILE=prj_x86.conf
    extra_configs:
      - CONFIG_X86_SSE_FP_MATH=y
    platform_allow:
      - qemu_x86/atom
      - qemu_x86_lakemont/lakemont
      - intel_ehl_crb/elkhart_lake
      - acrn_ehl_crb/elkhart_lake
    integration_platforms:
      - qemu_x86/atom
